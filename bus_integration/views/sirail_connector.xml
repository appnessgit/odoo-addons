<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="object_mapping_tree">
            <field name="name">object.mapping.tree</field>
            <field name="model">object.mapping</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <tree create="false" edit="false" delete="false">
                    <field name="name"/>
                    <field name="transmit"/>
                    <field name="migration"/>
                    <field name="key_xml_id"/>
                    <field name="deactivated_sync"/>
                    <field name="deactivate_on_delete"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="object_mapping_search">
            <field name="name">object.mapping.search</field>
            <field name="model">object.mapping</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <search string="Object Mapping">
                    <field name="name"/>
                    <field name="transmit"/>
                    <group expand="0" string="Filters">
                        <filter name="transmit_ok" string="Transmit"
                                domain="[('transmit','!=', False)]"/>
                        <filter name="mibrable_ok" string="Mibrable"
                                domain="[('migration','!=', False)]"/>
                        <filter name="key_xml_id" string="Key on xml id"
                                domain="[('key_xml_id','!=', False)]"/>
                        <filter name="deactivated_sync" string="Deactivated sync"
                                domain="[('deactivated_sync','!=', False)]"/>
                        <filter name="deactivate_on_delete" string="Deactivate on delete"
                                domain="[('deactivate_on_delete','!=', False)]"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="object_mapping_form">
            <field name="name">object.mapping.form</field>
            <field name="model">object.mapping</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <form string="Object mapping">
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="transmit"/>
                            <field name="migration"/>
                            <field name="key_xml_id"/>
                            <field name="deactivated_sync"/>
                            <field name="deactivate_on_delete"/>
                        </group>
                        <notebook>
                            <page>
                                <field name="field_ids">
                                    <tree create="false" delete="false" editable="bottom">
                                        <field name="export_field"/>
                                        <field name="import_field"/>
                                        <field name="migration"/>
                                        <field name="name"/>
                                        <field name="map_name"/>
                                        <field name="type_field"/>
                                        <field name="relation"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_object_mapping">
            <field name="name">Object Mapping</field>
            <field name="res_model">object.mapping</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
            <field name="context">{'search_default_transmit_ok': True}</field>
            <field name="help"/>
        </record>

        <record model="ir.ui.view" id="sirail_res_partner_form">
            <field name="name">sirail.res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <data>
                    <field name="title" position="after">
                        <field name="identifiant_bus"></field>
                    </field>
                </data>
            </field>
        </record>

        <record model="ir.ui.view" id="bus_config_form">
            <field name="name">busextend.backend.form</field>
            <field name="model">busextend.backend</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <form string="Object mapping">
                    <sheet>
                        <group>
                            <field name="connexion_url"/>
                            <field name="port"/>
                            <field name="db_odoo"/>
                            <field name="user_id"/>
                            <field name="login"/>
                            <field name="pwd" password="1"/>
                            <field name="emetteur"/>
                            <field name="identifiant"/>
                            <field name="code_recep_response"/>
                            <group colspan="2">
                                <button name="test_connexion" type="object" string="Test Connexion"/>
                                <field name="connexion_state" nolabel="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page>
                                <field name="batch_ids"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_bus_config">
            <field name="name">Configuration</field>
            <field name="res_model">busextend.backend</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="res_id" ref="bus_integration.backend"/>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="help"/>
        </record>

        <menuitem id="sirail_menu_bus_sirail_menu" name="Bus"
                  parent="connector.menu_connector_root"
                  groups="sirail_config.group_ndp_administrator"
                  sequence="50"/>

        <menuitem id="sirail_menu_bus_config_menu" name="Configuration"
                  action="sirail_act_window_bus_config" parent="sirail_menu_bus_sirail_menu"
                  sequence="10"/>

        <menuitem id="sirail_menu_object_mapping_menu" name="Object Mapping"
                  action="sirail_act_window_object_mapping" parent="sirail_menu_bus_sirail_menu"
                  sequence="50"/>

        <record model="ir.ui.view" id="bus_model_extend_tree">
            <field name="name">bus_model_extend_tree</field>
            <field name="model">bus.model.extend</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <tree create="false">
                    <field name="model"/>
                    <field name="external_key"/>
                    <field name="openerp_id"/>
                    <field name="to_deactivate"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="bus_model_extend_search">
            <field name="name">bus_model_extend_search</field>
            <field name="model">bus.model.extend</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <search string="Synchronized Data">
                    <field name="model"/>
                    <field name="openerp_id"/>
                    <field name="external_key"/>
                    <group expand="0" string="Filters">
                        <filter name="to_deactivate" string="To Deactivate"
                                domain="[('to_deactivate','=', True)]"/>
                        <filter name="no_to_deactivate" string="To not deactivate"
                                domain="[('to_deactivate','=', False)]"/>
                    </group>
                    <group expand="0" string="Group By">
                        <filter name="by_model" string="Model"
                                context="{'group_by': 'model'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_bus_model_extend">
            <field name="name">Synchronized Data</field>
            <field name="res_model">bus.model.extend</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="help"/>
        </record>

        <menuitem id="sirail_menu_bus_model_extend" name="Synchronized Data"
                  action="sirail_act_window_bus_model_extend" parent="sirail_menu_bus_sirail_menu"
                  sequence="100"/>

        <record model="ir.ui.view" id="busextend_backend_batch_histo_tree">
            <field name="name">busextend_backend_batch_histo_tree</field>
            <field name="model">busextend.backend.batch.histo</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <tree create="false" edit="false" delete="false">
                    <field name="state"/>
                    <field name="name"/>
                    <field name="serial_id"/>
                    <field name="batch_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_busextend_backend_batch_histo">
            <field name="name">Synchronized Historique</field>
            <field name="res_model">busextend.backend.batch.histo</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="help"/>
        </record>

        <menuitem id="sirail_menu_busextend_backend_batch_histo" name="Synchronized Histo"
                  action="sirail_act_window_busextend_backend_batch_histo" parent="sirail_menu_bus_sirail_menu"
                  sequence="100"/>

        <record model="ir.ui.view" id="busextend_backend_batch_histo_log_tree">
            <field name="name">busextend_backend_batch_histo_log_tree</field>
            <field name="model">busextend.backend.batch.histo.log</field>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <tree create="false" edit="false" delete="false">
                    <field name="histo_id"/>
                    <field name="serial_id"/>
                    <field name="job_uid"/>
                    <field name="log"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_busextend_backend_batch_histo_log">
            <field name="name">Synchronized logs</field>
            <field name="res_model">busextend.backend.batch.histo.log</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
            <field name="help"/>
        </record>
        <menuitem id="sirail_menu_bus_model_extend_log" name="Synchronized Log"
                  action="sirail_act_window_busextend_backend_batch_histo_log" parent="sirail_menu_bus_sirail_menu"
                  sequence="100"/>

        <record id="bus_export_config_tree" model="ir.ui.view">
            <field name="name">bus_export_config_tree</field>
            <field name="model">busextend.backend.batch</field>
            <field name="arch" type="xml">
                <tree string="Configuration of template exports" editable="bottom">
                    <field name="destinataire"/>
                    <field name="identifiant"/>
                    <field name="type_id"/>
                    <field name="code_recep"/>
                    <field name="model"/>
                    <field name="commentaire"/>
                    <field name="actif"/>
                    <field name="last_transfert"/>
                    <field name="init_conf" invisible="1"/>
                    <button string="Détails" name="open_popup_parameter" type="object"
                            context="{'recep_id':id}"/>
                    <button string="Init" name="create_cron" type="object"
                            attrs="{'invisible':[('init_conf','=',True)]}"/>
                    <button string="Edit cron" name="edit_cron" type="object"
                            attrs="{'invisible':[('init_conf','=',False)]}"/>
                    <button string="run" name="run_batch" type="object"
                            attrs="{'invisible':[('init_conf','=',False)]}"/>
                </tree>
            </field>
        </record>

        <record id="bus_export_config_search" model="ir.ui.view">
            <field name="name">bus_export_config_search</field>
            <field name="model">busextend.backend.batch</field>
            <field name="arch" type="xml">
                <search string="Configuration of template exports">
                    <field name="destinataire"/>
                    <field name="identifiant"/>
                    <field name="type_id"/>
                    <field name="code_recep"/>
                    <field name="commentaire"/>
                    <field name="model"/>
                    <group expand="0" string="Group By">
                        <filter string="Destinataire" domain="[]" context="{'group_by':'destinataire'}"/>
                        <filter string="Identifiant" domain="[]" context="{'group_by':'identifiant'}"/>
                        <filter string="Type traitement" domain="[]" context="{'group_by':'type_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="sirail_act_window_bus_config_export">
            <field name="name">Configuration of template exports</field>
            <field name="res_model">busextend.backend.batch</field>
            <field name="view_mode">tree,form</field>
            <field name="help"/>
        </record>

        <menuitem id="sirail_menu_bus_config_export_menu" name="Configuration of template exports"
                  action="sirail_act_window_bus_config_export" parent="sirail_menu_bus_sirail_menu"
                  sequence="15"/>

    </data>
</openerp>
